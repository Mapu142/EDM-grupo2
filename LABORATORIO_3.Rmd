---
title: "LABORATORIO_3"
author:
  - Sergio Alejandro Buitrago Melo
  - María Alejandra Cabra Arias
  - María Paula Camargo Rincón
  - Ana María Chacón Bello
  - Sergio Alejandro Gaona Díaz
  - Juan Esteban García Muete
date: '2025-05-14'
output: pdf_document
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## hola mundo

los comandos son (usenlo en la terminal, no en la consola):

git pull origin main git add . git commit -m "comentario" git push
origin Tu_rama

hacen el pull request

-se pasan a main local -git pull origin main -luego a su rama local -git
merge main -git push origin su rama

ashfjksdhfakjgfdsbgaljf \<- Profundo

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to
prevent printing of the R code that generated the plot.

Laboratorio #2

Librerias y preliminares:

```{r setup, include=FALSE}
#librerias
library(readxl)
library(FactoMineR)
library(ggplot2)
library(factoextra)
#base de datos
ciudades <- ciudades_original_filtrado_con_etiquetas
summary(ciudades)
str(ciudades)
View(ciudades)
```

Se realizaràn los distintos ACP con las variables de RH e INFRA

```{r setup, include=FALSE}
#base de datos RH+INFRA
ciudadest<-ciudades[,c(2:15,21:30)]
str(ciudadest)
View(ciudadest)

?PCA
```

PRIMER PUNTO

```{r setup, include=FALSE}
#ACP todas las variables que le corresponden
acp1<-PCA(ciudadest)

#contiene los auto valores correspondientes a los componentes principales
s1<-acp1$eig
s1

#al sumar la columna de los eigenvalue da 24
sum(s1[,1])

#la coluna de porcentages de varianza acumulados
#nos muestra que tan importantes son los primeros componentes
# y es notable como con los primeros 10 ya se acumula
# el 90 porciento de la varianza
s1[,3]

#correlaciones variable factor
acp1$var$cor
#RH13 a Dimension 4
#no se como interpretar esto

```
Gràficos primer punto 

```{r setup, include=FALSE}

#  Gráfico de individuos 
G11<-fviz_pca_ind(acp1,
             col.ind = "cos2",  # calidad de representación
             gradient.cols = c("darkgreen", "#E7B800", "#FC4E07"),
             repel = TRUE
)
G11
```

```{r setup, include=FALSE}

G12<-fviz_pca_var(acp1,
                  col.var = 'red',
                  alpha.var = 0.5,
                  select.var = list(contrib = 7),
                  repel = TRUE,
                  col.quanti.sup = 'darkgrey'
)
G12
```

```{r setup, include=FALSE}


# 6. Biplot (variables + individuos)
G13<-fviz_pca_biplot(acp1,
                     col.ind = "red",
                     col.var = "darkblue",
                     select.var = list(contrib = 7),
                     repel = T,
                     col.quanti.sup = 'darkgrey'
)
G13
```
SEGUNDO PUNTO

```{r setup, include=FALSE}


acp2<-PCA(ciudadest,quanti.sup = c(1:14))
var_contrib <- data.frame(acp2$var$contrib)

top5_vars <- rownames(var_contrib)[order(var_contrib$Dim.1 + var_contrib$Dim.2, decreasing = TRUE)][1:5]
sup_vars <- rownames(acp2$quanti.sup$coord)
all_vars <- c(top5_vars, sup_vars)
s2<-acp2$eig
sum(s2[,1])
```

Gràficos punto#2:

```{r setup, include=FALSE}

#  Gráfico de individuos 
G21<-fviz_pca_ind(acp2,
             col.ind = "cos2",  # calidad de representación
             gradient.cols = c("darkgreen", "#E7B800", "#FC4E07"),
             repel = TRUE
)
G21
```

```{r setup, include=FALSE}

G22<-fviz_pca_var(acp2,
                  col.var = 'red',
                  alpha.var = 0.5,
                  repel = TRUE,
                  col.quanti.sup = 'darkgrey',
                  select.var = list(name =c(all_vars)),
                  title = 'Variables y suplementarias'
)

G22
```

```{r setup, include=FALSE}



G23<-fviz_pca_biplot(acp2,
                     col.ind = "red",
                     col.var = "darkblue",
                     repel = T,
                     col.quanti.sup = 'darkgrey',
                     select.var = list(name =c(all_vars)),
            title = 'Biplot'
)
G23
```

(resaltar 3 (bogota ) 16 (riohacha) y 17 (san andres ))

TERCER PUNTO

```{r setup, include=FALSE}
acp3<-PCA(ciudadest,quanti.sup = c(15:24))
acp3$eig

var_contrib3 <- data.frame(acp3$var$contrib)

top5_vars3 <- rownames(var_contrib3)[order(var_contrib3$Dim.1 + var_contrib3$Dim.2, decreasing = TRUE)][1:6]
sup_vars3 <- rownames(acp3$quanti.sup$coord)
all_vars3 <- c(top5_vars3, sup_vars3)


```
Gràficos punto #3

```{r setup, include=FALSE}

#  Gráfico de individuos 
G31<-fviz_pca_ind(acp3,
             col.ind = "cos2",  # calidad de representación
             gradient.cols = c("darkgreen", "#E7B800", "#FC4E07"),
             repel = TRUE
)
G31
```

```{r setup, include=FALSE}

G32<-fviz_pca_var(acp3,
                  col.var = 'red',
                  alpha.var = 0.5,
                  repel = TRUE,
                  col.quanti.sup = 'darkgrey',
                  select.var = list(name =c(all_vars3)),
                  title = 'Variables y suplementarias'
)

G32
```
```{r setup, include=FALSE}
G33<-fviz_pca_biplot(acp3,
                     col.ind = "red",
                     col.var = "darkblue",
                     repel = T,
                     col.quanti.sup = 'darkgrey',
                     select.var = list(name =c(all_vars3)),
            title = 'Biplot'
)
G33
```
